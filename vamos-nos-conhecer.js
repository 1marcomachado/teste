(function(){const AC={domain:"https://bazardesportivo.activehosted.com",hidden:{u:"1",f:"1",s:"",c:"0",m:"0",act:"sub",v:"2",or:"9b1dc3f6-bcc6-4006-ae74-81db51d6d414"}},qs=(e,t=document)=>t.querySelector(e),qsa=(e,t=document)=>Array.from(t.querySelectorAll(e)),isEmail=e=>/^[+_a-z0-9-'&=]+(\.[+_a-z0-9-']+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$/i.test(e),getParam=e=>{const t=new URLSearchParams(location.search);return t.get(e)||""},I18N={pt:{q1_title:"QUESTÃO 1",q1_desc:"Queremos dar-te um presente. Qual é a tua data de nascimento?",dob_ph:"DIA/MÊS/ANO",next:"Avançar",q2_title:"QUESTÃO 2",q2_desc:"Qual é o teu estilo de preferência?",style_w:"Mulher",style_m:"Homem",style_b:"Ambos",q3_title:"QUESTÃO 3",q3_desc:"Que tipo de comunicação preferes receber?",comm_f:"Moda",comm_s:"Desporto",comm_b:"Ambos",q4_title:"QUESTÃO 4",q4_desc:"Quais são as tuas modalidades favoritas?",sports_all:"Seleciona todas",s_football:"Futebol",s_running:"Running (Corrida)",s_gym:"Fitness e Training (Ginásio)",s_swim:"Natação",s_futsal:"Futsal",s_trail:"Trail",s_padel:"Padel",s_tennis:"Ténis",submit:"Avançar",thank_title:"OBRIGADA PELAS TUAS RESPOSTAS!",thank_desc:"Verifica o teu email! Enviámos-te um código 15% de desconto para gastares na nossa loja online.",gate_title:"Abre este formulário pelo link do email",gate_desc:"Para continuares, abre o formulário pelo link único que te enviámos no email da campanha. Se não o encontrares, verifica a pasta de spam.",gate_btn:"Já abri pelo link",err_dob_invalid:"Introduz uma data válida no formato DD/MM/AAAA.",err_dob_future:"A data não pode ser no futuro.",err_select_opt:"Seleciona uma opção.",err_select_sport:"Seleciona pelo menos uma modalidade.",toast_saved:"Preferências guardadas.",toast_need_link:"Abre este formulário pelo link da campanha (com ?email=…)",toast_csp:"Bloqueado por CSP/rede",toast_timeout:"Sem resposta do servidor. Tenta novamente.",toast_send_error:"Falha no envio."},en:{q1_title:"QUESTION 1",q1_desc:"We have a gift for you. What is your date of birth?",dob_ph:"DAY/MONTH/YEAR",next:"Next",q2_title:"QUESTION 2",q2_desc:"What is your preferred style?",style_w:"Women",style_m:"Men",style_b:"Both",q3_title:"QUESTION 3",q3_desc:"What type of communication would you like to receive?",comm_f:"Fashion",comm_s:"Sport",comm_b:"Both",q4_title:"QUESTION 4",q4_desc:"What are your favourite sports?",sports_all:"Select all",s_football:"Football",s_running:"Running",s_gym:"Fitness & Training",s_swim:"Swimming",s_futsal:"Futsal",s_trail:"Trail",s_padel:"Padel",s_tennis:"Tennis",submit:"Next",thank_title:"THANK YOU FOR YOUR ANSWERS!",thank_desc:"Check your email! We’ve sent you a 15% discount code to use in our online store.",gate_title:"Open this form from the email link",gate_desc:"To continue, open the form using the unique link we sent in the campaign email. If you can’t find it, check your spam.",gate_btn:"I opened via the link",err_dob_invalid:"Enter a valid date in the format DD/MM/YYYY.",err_dob_future:"The date cannot be in the future.",err_select_opt:"Please choose an option.",err_select_sport:"Select at least one sport.",toast_saved:"Preferences saved.",toast_need_link:"Open this form from the campaign link (with ?email=…)",toast_csp:"Blocked by CSP/network",toast_timeout:"No response from server. Try again.",toast_send_error:"Failed to send."},es:{q1_title:"PREGUNTA 1",q1_desc:"Tenemos un regalo para ti. ¿Cuál es tu fecha de nacimiento?",dob_ph:"DÍA/MES/AÑO",next:"Siguiente",q2_title:"PREGUNTA 2",q2_desc:"¿Cuál es tu estilo preferido?",style_w:"Mujer",style_m:"Hombre",style_b:"Ambos",q3_title:"PREGUNTA 3",q3_desc:"¿Qué tipo de comunicaciones quieres recibir?",comm_f:"Moda",comm_s:"Deporte",comm_b:"Ambos",q4_title:"PREGUNTA 4",q4_desc:"¿Cuáles son tus modalidades favoritas?",sports_all:"Seleccionar todas",s_football:"Fútbol",s_running:"Running (Carrera)",s_gym:"Fitness y Training (Gimnasio)",s_swim:"Natación",s_futsal:"Fútbol sala",s_trail:"Trail",s_padel:"Pádel",s_tennis:"Tenis",submit:"Siguiente",thank_title:"¡GRACIAS POR TUS RESPUESTAS!",thank_desc:"¡Revisa tu email! Te hemos enviado un código de 15% para usar en nuestra tienda online.",gate_title:"Abre este formulario desde el enlace del email",gate_desc:"Para continuar, abre el formulario usando el enlace único que te enviamos en el email de la campaña. Si no lo ves, revisa el spam.",gate_btn:"Ya abrí desde el enlace",err_dob_invalid:"Introduce una fecha válida en formato DD/MM/AAAA.",err_dob_future:"La fecha no puede ser futura.",err_select_opt:"Selecciona una opción.",err_select_sport:"Selecciona al menos una modalidad.",toast_saved:"Preferencias guardadas.",toast_need_link:"Abre este formulario desde el enlace de la campaña (con ?email=…)",toast_csp:"Bloqueado por CSP/red",toast_timeout:"Sin respuesta del servidor. Inténtalo de nuevo.",toast_send_error:"Error al enviar."}},getLang=e=>{const t=(e||"").toLowerCase(),n=(getParam("lang")||"").toLowerCase();let o="";try{const e=document.currentScript||[...document.querySelectorAll("script")].pop();o=(e?.dataset?.shopLang||"").toLowerCase()}catch(e){}const a=(document.documentElement.getAttribute("lang")||"").toLowerCase().split("-")[0];return[t,n,o,a,"pt"].find(e=>e&&I18N[e])||"pt"},b64urlDecode=e=>{if(!e)return"";try{for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";return atob(e)}catch(e){return""}},getEmail=()=>{const e=getParam("email");if(e&&isEmail(e))return e;const t=getParam("e");if(t){const e=b64urlDecode(t.trim());if(e&&isEmail(e))return e}try{const e=localStorage.getItem("bzr_ac_email");if(e&&isEmail(e))return e}catch(e){}const n=document.cookie.match(/(?:^|; )bzr_ac_email=([^;]+)/);if(n){const e=decodeURIComponent(n[1]);if(isEmail(e))return e}return""},setEmail=e=>{try{localStorage.setItem("bzr_ac_email",e)}catch(e){}const t="https:"===location.protocol?"; Secure":"";document.cookie=`bzr_ac_email=${encodeURIComponent(e)}; expires=${new Date(Date.now()+31536e6).toUTCString()}; path=/; SameSite=Lax${t}`},toDobISO=e=>{if(!e)return"";e=e.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const[t,n,o]=e.split("-").map(Number),a=new Date(t,n-1,o);return a.getFullYear()===t&&a.getMonth()===n-1&&a.getDate()===o?e:""}const t=e.match(/^(\d{1,2})\D(\d{1,2})\D(\d{4})$/);if(!t)return"";const n=+t[1],o=+t[2],a=+t[3],r=new Date(a,o-1,n);return r.getFullYear()!==a||r.getMonth()!==o-1||r.getDate()!==n?"":`${String(a).padStart(4,"0")}-${String(o).padStart(2,"0")}-${String(n).padStart(2,"0")}`},enc=e=>{const t=[];for(const[n,o]of Object.entries(e))Array.isArray(o)?o.forEach(e=>t.push(`${encodeURIComponent(n)}=${encodeURIComponent(e)}`)):t.push(`${encodeURIComponent(n)}=${encodeURIComponent(o??"")}`);return t.join("&")},toast=e=>{let t=qs("#bzr_toast");t||(t=document.createElement("div"),t.id="bzr_toast",t.className="toast",document.body.appendChild(t)),t.textContent=e,t.classList.add("show"),setTimeout(()=>t.classList.remove("show"),4e3)};const BASE=`@import url('https://fonts.googleapis.com/css2?family=Oswald:wght@300;700&display=swap');body{margin:0;font-family:'Oswald',sans-serif;background:black}.form-container{position:relative;width:100%;height:100vh;overflow:hidden;background-color:rgba(0,0,0,.5)}.step{position:absolute;width:100%;height:100%;background-size:cover;background-position:center;display:none;opacity:0;transition:opacity 1s ease}.step.active{display:block;opacity:1}.overlay{background-color:rgba(0,0,0,.5);width:100%;height:100%;display:flex;justify-content:center;align-items:center;padding:20px}.content-box{padding:40px;border-radius:10px;max-width:600px;width:100%;color:white;text-align:left;opacity:0;transition:opacity 1s ease}.step.active .content-box{opacity:1}.content-box h2{font-size:28px;font-weight:700;margin-bottom:15px;color:white;line-height:32px}.content-box p{font-size:18px;font-weight:300;margin-bottom:20px}.content-box input[type=text],.content-box input[type=email],.content-box select{width:100%;padding:12px;font-size:16px;margin-bottom:20px;box-sizing:border-box}.content-box label{display:block;margin:5px 0;font-weight:300}.content-box button{padding:10px 25px;font-size:16px;background-color:white;color:black;border:none;cursor:pointer}@media (max-width:768px){.overlay{padding:0}.content-box{text-align:center;padding:20px;max-width:90%}.content-box h2{font-size:22px}.content-box p{font-size:15px}.content-box button{width:100%}}#step1{background-image:url('https://www.bzronline.com/downloads/misc17.jpg')}@media (max-width:768px){#step1{background-image:url('https://www.bzronline.com/downloads/misc22.jpg')}}#step2{background-image:url('https://www.bzronline.com/downloads/misc18.jpg')}@media (max-width:768px){#step2{background-image:url('https://www.bzronline.com/downloads/misc23.jpg')}}#step3{background-image:url('https://www.bzronline.com/downloads/misc19.jpg')}@media (max-width:768px){#step3{background-image:url('https://www.bzronline.com/downloads/misc24.jpg')}}#step4{background-image:url('https://www.bzronline.com/downloads/misc20.jpg')}@media (max-width:768px){#step4{background-image:url('https://www.bzronline.com/downloads/misc25.jpg')}}#step5{background-image:url('https://www.bzronline.com/downloads/misc21.jpg')}@media (max-width:768px){#step5{background-image:url('https://www.bzronline.com/downloads/misc26.jpg')}}.structuredText .dis_cell{padding:0!important}.wrapper-page{padding-bottom:0!important}.toast{position:fixed;top:12px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:10px 16px;border-radius:6px;opacity:.95;font-size:14px;z-index:9999;display:none}.toast.show{display:block}.err{outline:1px solid #E40E49;border-color:#E40E49 !important}.err-msg{color:#FFD1D1;font-size:13px;margin:4px 0 8px 0;text-align:left}`,OVERRIDES=`.bzr-form .content-box input[type=text],.bzr-form .content-box input[type=email],.bzr-form .content-box select{margin-bottom:20px !important}.bzr-form .content-box button{margin-top:0 !important}@media (max-width:768px){.bzr-form .content-box button{width:auto !important}}.bzr-form .content-box label{margin:10px 0 !important}`;function inject(e={}){const t=getLang(e.lang),n=I18N[t],o=document.createElement("style");o.appendChild(document.createTextNode(BASE+OVERRIDES)),document.head.appendChild(o);const a=("string"==typeof e.mount?qs(e.mount):e.mount)||document.body,r=document.createElement("div");if(r.className="form-container bzr-form",r.id="bzr-form",r.innerHTML=`<div class="step active" id="step1"><div class="overlay"><div class="content-box"><h2>${n.q1_title}</h2><p>${n.q1_desc}</p><input type="text" placeholder="${n.dob_ph}" id="dob" /><div id="err_dob" class="err-msg" style="display:none" role="alert" aria-live="assertive"></div><button class="next-btn" data-next="#step2">${n.next}</button></div></div></div><div class="step" id="step2"><div class="overlay"><div class="content-box"><h2>${n.q2_title}</h2><p>${n.q2_desc}</p><label><input type="radio" name="style" value="${n.style_w}"> ${n.style_w}</label><label><input type="radio" name="style" value="${n.style_m}"> ${n.style_m}</label><label><input type="radio" name="style" value="${n.style_b}"> ${n.style_b}</label><div id="err_style" class="err-msg" style="display:none" role="alert" aria-live="assertive"></div><button class="next-btn" data-next="#step3">${n.next}</button></div></div></div><div class="step" id="step3"><div class="overlay"><div class="content-box"><h2>${n.q3_title}</h2><p>${n.q3_desc}</p><label><input type="radio" name="comm" value="${n.comm_f}"> ${n.comm_f}</label><label><input type="radio" name="comm" value="${n.comm_s}"> ${n.comm_s}</label><label><input type="radio" name="comm" value="${n.comm_b}"> ${n.comm_b}</label><div id="err_comm" class="err-msg" style="display:none" role="alert" aria-live="assertive"></div><button class="next-btn" data-next="#step4">${n.next}</button></div></div></div><div class="step" id="step4"><div class="overlay"><div class="content-box"><h2>${n.q4_title}</h2><p>${n.q4_desc}</p><label><input type="checkbox" name="sports" value="todas"> ${n.sports_all}</label><label><input type="checkbox" name="sports" value="${n.s_football}"> ${n.s_football}</label><label><input type="checkbox" name="sports" value="${n.s_running}"> ${n.s_running}</label><label><input type="checkbox" name="sports" value="${n.s_gym}"> ${n.s_gym}</label><label><input type="checkbox" name="sports" value="${n.s_swim}"> ${n.s_swim}</label><label><input type="checkbox" name="sports" value="${n.s_futsal}"> ${n.s_futsal}</label><label><input type="checkbox" name="sports" value="${n.s_trail}"> ${n.s_trail}</label><label><input type="checkbox" name="sports" value="${n.s_padel}"> ${n.s_padel}</label><label><input type="checkbox" name="sports" value="${n.s_tennis}"> ${n.s_tennis}</label><div id="err_sports" class="err-msg" style="display:none" role="alert" aria-live="assertive"></div><button id="submitBtn">${n.submit}</button></div></div></div><div class="step" id="step5"><div class="overlay"><div class="content-box"><h2 style="font-size:30px;">${n.thank_title}</h2><h4 style="color:white;">${n.thank_desc}</h4></div></div></div>`,a.appendChild(r),!isEmail(getEmail())){qsa(".step",r).forEach(e=>e.classList.remove("active"));const e=document.createElement("div");return e.className="step active",e.id="step0",e.innerHTML=`<div class="overlay"><div class="content-box"><h2>${n.gate_title}</h2><p>${n.gate_desc}</p><button id="tryAgainBtn" type="button">${n.gate_btn}</button></div></div>`,r.appendChild(e),void e.querySelector("#tryAgainBtn").addEventListener("click",()=>location.reload())}function i(e){const t=qs(e,r);if(!t)return;const n=t.querySelector("input, select, button");n&&n.focus({preventScroll:!0})}function s(e,t){e&&(e.style.display="block",e.textContent=t)}function l(e){e&&(e.style.display="none",e.textContent="")}function c(){l(qs("#err_dob",r));const e=qs("#dob",r);e.classList.remove("err");const t=(e.value||"").trim(),n=toDobISO(t);if(!t||!n)return s(qs("#err_dob",r),d.err_dob_invalid),e.classList.add("err"),e.scrollIntoView({behavior:"smooth",block:"center"}),!1;const o=new Date;o.setHours(0,0,0,0);const a=new Date(n);return!isNaN(a.getTime())&&!(a>o)||(s(qs("#err_dob",r),a>o?d.err_dob_future:d.err_dob_invalid),e.classList.add("err"),e.scrollIntoView({behavior:"smooth",block:"center"}),!1)}function u(){return l(qs("#err_style",r)),qs('input[name="style"]:checked',r)?!0:(s(qs("#err_style",r),d.err_select_opt),qs("#step2 .content-box",r).scrollIntoView({behavior:"smooth",block:"center"}),!1)}function m(){return l(qs("#err_comm",r)),qs('input[name="comm"]:checked',r)?!0:(s(qs("#err_comm",r),d.err_select_opt),qs("#step3 .content-box",r).scrollIntoView({behavior:"smooth",block:"center"}),!1)}function f(){l(qs("#err_sports",r));const e=(qs('input[name="comm"]:checked',r)||{}).value||"",t=qsa('input[name="sports"]:checked',r).filter(e=>"todas"!==e.value.toLowerCase());return(e===d.comm_s||e===d.comm_b)&&0===t.length?(s(qs("#err_sports",r),d.err_select_sport),qs("#step4 .content-box",r).scrollIntoView({behavior:"smooth",block:"center"}),!1):!0}const d=n,p=qsa('input[type="checkbox"][name="sports"]',r),y=p.find(e=>"todas"===e.value.toLowerCase());if(y){const e=p.filter(e=>e!==y),t=()=>{y.checked=e.length>0&&e.every(e=>e.checked)};y.addEventListener("change",()=>{e.forEach(e=>e.checked=y.checked)}),e.forEach(n=>{n.addEventListener("change",()=>{n.checked?t():y.checked=!1})})}qsa("#step1 .next-btn",r).forEach(e=>e.addEventListener("click",()=>{c()&&(qs("#step1",r).classList.remove("active"),qs("#step2",r).classList.add("active"),i("#step2"))})),qsa("#step2 .next-btn",r).forEach(e=>e.addEventListener("click",()=>{u()&&(qs("#step2",r).classList.remove("active"),qs("#step3",r).classList.add("active"),i("#step3"))})),qsa("#step3 .next-btn",r).forEach(e=>e.addEventListener("click",()=>{m()&&(qs("#step3",r).classList.remove("active"),qs("#step4",r).classList.add("active"),i("#step4"))}));let h=null;const g=qs("#submitBtn",r);function v(){g.disabled=!1,g.textContent=d.submit}function b(){g.disabled=!0,g.textContent="…"}window._show_thank_you=function(){h&&(clearTimeout(h),h=null),v(),qs("#step4",r).classList.remove("active"),qs("#step5",r).classList.add("active"),toast(d.toast_saved)},window._show_error=function(e,t){h&&(clearTimeout(h),h=null),v();const n=(t||d.toast_send_error).replace(/<[^>]+>/g,"").trim();toast(n||d.toast_send_error)},g.addEventListener("click",()=>{if(!c())return qs("#step4",r).classList.remove("active"),qs("#step1",r).classList.add("active"),void i("#step1");if(!u())return qs("#step4",r).classList.remove("active"),qs("#step2",r).classList.add("active"),void i("#step2");if(!m())return qs("#step4",r).classList.remove("active"),qs("#step3",r).classList.add("active"),void i("#step3");if(!f())return;const e=getEmail();if(!isEmail(e))return void toast(d.toast_need_link);setEmail(e);const t=qsa('input[name="sports"]:checked',r).filter(e=>"todas"!==e.value.toLowerCase()).map(e=>e.value),n={email:e,"field[1]":toDobISO(qs("#dob",r).value.trim()),"field[6]":(qs('input[name="comm"]:checked',r)||{}).value||"","field[13]":(qs('input[name="style"]:checked',r)||{}).value||"","field[10][]":t.length?t:["~|"],...AC.hidden};b();const o=document.createElement("script");o.src=`${AC.domain}/proc.php?${enc(n)}&jsonp=true`,o.async=!0,o.onerror=()=>{v(),toast(d.toast_csp)},document.head.appendChild(o),h=setTimeout(()=>{v(),toast(d.toast_timeout)},8e3)}),i("#step1")}window.BZRLeadForm={init:(e={})=>inject(e),submit:()=>qs("#submitBtn")?.click()},document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>BZRLeadForm.init({mount:".wrapper-page"})):BZRLeadForm.init({mount:".wrapper-page"})})();
